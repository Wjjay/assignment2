{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title":{"text": "Total CO2 Emissions", "align": "center"},
    
        "width":1200,
        "height":720,
        "params": [
            {
                "name": "continentSelect",
                "value": null,
                "bind":{
                    "input": "select",
                    "options": [
                        null,
                        "Oceania",
                        "Africa",
                        "Asia",
                        "Europe",
                        "North America",
                        "South America"
                    ],
                    "labels": [
                        "All",
                        "Oceania",
                        "Africa",
                        "Asia",
                        "Europe",
                        "North America",
                        "South America"
                    ],
                    "name": "Continent Select: "            
                }
            }   
        ],
        "data": {
            "url": "data/continent_data.csv"
            },
        "transform": [
            {"filter": "datum.Year >= 1961"},
            {"filter": "datum.Year <= 2018"},
            {
                "filter": "continentSelect == null || datum['Continent_Name' == continentSelect]"
            }
        ],
        "vconcat": [
            {
                "width":1180,
                "height":360,
                "layer": [
                    {     
                        "mark": "line",
                        "encoding":{
                        "x": {
                            "field":"Year",
                            "type": "quantitative",
                            "scale":{
                                "domain": [1961, 2018]
                            },
                            "title": "Year",
                            "axis": {"tickCount": 20, "format": ""}
                        },
                        "y":{
                            "field": "CO2 Emission",
                            "type": "quantitative",
                            "title": "CO2 Emission (metric tonnes per capita)"
                        },
                        "color":{
                            "field":"Continent_Name",
                            "type": "nominal",
                            "legend": null
                        },
            
                        "tooltip": [
                            
                            {
                                "field": "Year"                    
                            },
                            {
                                "field": "Continent_Name",
                                "type": "nominal",
                                "title": "Continent"
                            },
                            {
                                "field": "CO2 Emission",
                                "type": "ordinal",
                                "format": ".3f",
                                "title": "CO2 Emissions (metric tonnes)"
                                }
                            ]            
                        }
                    },
                    {
                        "encoding": {
                          "x": {"aggregate": "max", "field": "Year", "type": "quantitative"},
                          "y": {
                            "aggregate": {"argmax": "Year"},
                            "field": "CO2 Emission",
                            "type": "quantitative"
                          }
                        },
                        "layer": [
                            {
                            "mark": {"type": "text", "align": "left", "dx": 4},
                            "encoding": {
                                "text": {
                                    "field": "Continent_Name", 
                                    "type": "nominal"
                                    },
                                    "color":{
                                        "field":"Continent_Name",
                                        "type": "nominal"
                                    }
                                }
                            }
                        ]
                      }
                ]
            }
        ]
        

            

}


    
            
        
    
    
